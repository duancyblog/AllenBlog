@tailwind components;

@layer components {

:root {
  --tk-text: black;
}

html.dark {
  --tk-text: #d1d5db;
}

.tk-comments {
  @apply text-[var(--tk-text)];
}

.tk-submit {
  .tk-avatar {
    @apply hidden;
  }
}

/* Text Area */
.tk-row {
  .tk-col {
    @apply flex-col-reverse;
    .tk-input {
      textarea {
        @apply rounded-[var(--radius-large)] py-4 px-6 !min-h-[150px] focus:border-[var(--primary)];
      }
    }
  }
}

.el-input {
  @apply !rounded-lg;
}

.tk-meta-input {
  @apply min-h-10 relative mt-3;
  .el-input-group__prepend {
    @apply !bg-inherit;
  }
  div {
    @apply py-1 rounded-l-lg;
    min-height: inherit;
  }
  input {
    @apply px-4 rounded-r-lg focus:!border-[var(--primary)];
    min-height: inherit;
  }
}

/* Button */
.tk-row.actions {
  @apply w-full !ml-0 !mt-0;
  .__markdown {
    @apply !hidden;
  }
  .tk-preview,
  .tk-send,
  .tk-cancel {
    @apply border-none rounded-lg px-3 py-0 h-8
       !bg-[var(--btn-regular-bg-active)] disabled:!bg-[var(--btn-regular-bg)]
      !text-[var(--btn-content)] disabled:!text-[#ffffffa1];
  }
}

/* Comment title */
.tk-comments-title {
  .__comments svg {
    @apply fill-[var(--primary)];
  }
}

.tk-comment {
  @apply border-[1px] border-[rgba(144,147,153,0.31)] p-4 rounded-2xl hover:shadow-md transition-all;
  .tk-action-icon svg {
    @apply fill-[var(--primary)];
  }
}

.tk-action {
  .tk-action-count {
    @apply text-[var(--btn-content)];
  }
}

.tk-meta {
  .tk-tag {
    @apply border-none rounded-lg text-[var(--btn-content)];
  }

  .tk-tag-green {
    @apply bg-[var(--btn-regular-bg)] dark:bg-[var(--primary)] dark:text-[var(--deep-text)];
  }
}

.tk-content,
.tk-preview-container {
  a {
    @apply link link-underline text-[var(--primary)] font-medium;
  }

  .tk-ruser {
    @apply no-underline;
  }

  :not(pre) > code {
    @apply bg-[var(--inline-code-bg)] rounded-md text-[--inline-code-color] px-1 py-0.5 font-semibold;
  }

  li{
    @apply before:content-['â€¢'] before:text-[var(--primary)];
  }
}

/* Replies */
.tk-replies {
  .tk-comment {
    @apply bg-[var(--card-bg)] bg-opacity-50;
    .tk-content {
      > span:first-of-type {
        @apply text-xs;
      }
    }
  }
}

.twikoo .code-block {
  pre {
    @apply !rounded-xl;
  }

  .copy-btn-icon {
    width: inherit !important;
    height: inherit !important;
  }
}

.tk-expand-wrap .tk-expand,
.tk-collapse-wrap .tk-expand {
  @apply hover:rounded-lg mt-1 hover:bg-[var(--btn-plain-bg-hover)];
}

}

/* Fix: align emoji and image buttons to the left edge of the input toolbar */
#twikoo .tk-row.actions {
  display: flex !important;
  justify-content: flex-start !important;
  gap: 0.6rem !important;
  padding-left: 0 !important;
}

/* Target common Twikoo toolbar button classes and generic buttons inside actions */
#twikoo .tk-row.actions .tk-emoji-btn,
#twikoo .tk-row.actions .tk-image-btn,
#twikoo .tk-row.actions button,
#twikoo .tk-row.actions a {
  margin-left: 0 !important;
  margin-right: 0.4rem !important;
  align-self: center !important;
}

/* If icon wrapper has padding, reduce it so icons sit closer to left */
#twikoo .tk-row.actions .el-icon,
#twikoo .tk-row.actions .tk-action-icon {
  padding-left: 0 !important;
  padding-right: 0.2rem !important;
}

/* More specific fallbacks for nested toolbar structures */
#twikoo .tk-row.actions .tk-col,
#twikoo .tk-row.actions .tk-input,
#twikoo .tk-row.actions .tk-toolbar,
#twikoo .tk-row.actions .tk-actions {
  padding-left: 0 !important;
  margin-left: 0 !important;
}

/* If the toolbar uses an inner wrapper, align its children to left */
#twikoo .tk-row.actions .tk-actions > *,
#twikoo .tk-row.actions .tk-toolbar > * {
  margin-left: 0 !important;
  margin-right: 0.3rem !important;
}

/* Absolute-position fallback for stubborn themes: pin icons near left edge of the input box */
#twikoo .tk-row.actions .tk-actions {
  position: relative !important;
}
#twikoo .tk-row.actions .tk-emoji-btn,
#twikoo .tk-row.actions .tk-image-btn {
  position: relative !important;
  left: 0 !important;
}

/* Reduce left padding inside icon buttons to make them closer to the left edge */
#twikoo .tk-row.actions .tk-emoji-btn .el-icon,
#twikoo .tk-row.actions .tk-image-btn .el-icon {
  padding-left: 0 !important;
}

/* Enhanced fix for emoji and image button alignment */
#twikoo .tk-row.actions {
  display: flex !important;
  justify-content: flex-start !important;
  align-items: center !important;
  gap: 0.6rem !important;
  padding-left: 0 !important;
  margin-left: 0 !important;
  width: 100% !important;
}

/* Ensure toolbar buttons are properly aligned */
#twikoo .tk-emoji-btn,
#twikoo .tk-image-btn {
  margin: 0 !important;
  padding: 0.2rem !important;
  display: inline-flex !important;
  align-items: center !important;
  justify-content: center !important;
  position: static !important;
  left: auto !important;
  right: auto !important;
}

/* Fix toolbar container alignment */
#twikoo .tk-actions {
  display: flex !important;
  align-items: center !important;
  gap: 0.4rem !important;
  padding-left: 0 !important;
  margin-left: 0 !important;
}

/* Fix input area alignment */
#twikoo .tk-input {
  padding-left: 0 !important;
  margin-left: 0 !important;
  width: 100% !important;
}

/* Fix meta input alignment */
#twikoo .tk-meta-input {
  padding-left: 0 !important;
  margin-left: 0 !important;
  width: 100% !important;
}

/* Fix submit area alignment */
#twikoo .tk-submit {
  padding-left: 0 !important;
  margin-left: 0 !important;
  width: 100% !important;
}

/* Fix column alignment */
#twikoo .tk-col {
  padding-left: 0 !important;
  margin-left: 0 !important;
  width: 100% !important;
}

/* Remove preview button */
#twikoo .tk-preview {
  display: none !important;
  visibility: hidden !important;
  opacity: 0 !important;
  position: absolute !important;
  left: -9999px !important;
  top: -9999px !important;
}